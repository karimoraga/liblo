{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Librotek</title>
  <link type="text/css" rel="stylesheet" href="{% static 'core/css/style.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=K2D:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
  <style>
    .card-img {
      height: 225px;
      object-fit: cover;
    }
  </style>
</head>
<body id="cuerpo">
  <header>
    <div class="d-flex align-items-center">
      <a href="/">
        <img src={% static "core/img/placeholder.webp" %} id="logo" /> 
      </a>
      <nav class="navbar navbar-expand-lg navbar-dark data-bs-theme">
        <div class="container-fluid">
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active mx2" aria-current="page" href="/"
                  >Inicio</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="registro.html">Registrate</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="sesion.html">Iniciar sesion</a>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Categorías
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a class="dropdown-item" href="categoria1.html"
                      >Historia</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="categoria2.html"
                      >Fantasia</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="categoria3.html"
                      >Manuales</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="categoria4.html"
                      >Novelas</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="categoria5.html">Psicologia</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </header>
  <div class="content d-flex align-items-center justify-content-center">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-6">
                <div class="card-body">
                    <form id="registroForm">
                        <div class="mb-3">
                            <label for="" class="form-label">Nombre y apellido:</label>
                            <input type="text" name=""class="form-control" id="nombre">
                            <small class="text-danger" id="nombre-error"></small>
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Fecha de nacimiento:</label>
                            <input type="date" name=""class="form-control" id="fechanac">
                            <small class="text-danger" id="fechanac-error"></small>
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Nombre de usuario:</label>
                            <input type="text" name=""class="form-control" id="usuario">
                            <small class="text-danger" id="usuario-error"></small>
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Email</label>
                            <input type="email" name=""class="form-control" id="email">
                            <small class="text-danger" id="email-error"></small>
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Contraseña</label>
                            <input type="password" name="" class="form-control" id="contrasena">
                            <small class="text-danger" id="contrasena-error"></small>
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Repetir contraseña</label>
                            <input type="password" name="" class="form-control" id="contrasenavalidacion">
                            <small class="text-danger" id="contrasenavalidacion-error"></small>
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Dirección:</label>
                            <input type="text" name="nombre"class="form-control" id="direccion">
                            <small class="text-danger" id="direccion-error"></small>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-dark">Guardar</button>
                            <br>
                            <button type="reset" class="btn btn-secondary">Limpiar</button>
                        </div>                  
                    </form>
                </div>
        </div>
      </div>
    </div>
  </div>
  <footer class="footer text-center py-3">
    <p>@ 2024 GameZone <br>Karin Moraga - Vanessa Suazo</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="jquery/jquery-3.7.1.min.js"></script>
  <script>
    $(document).ready(function(){
    $('#registroForm').submit(function(event){
        event.preventDefault();
        $('#nombre-error').text('');
        $('#fechanac-error').text('');
        $('#usuario-error').text('');
        $('#email-error').text('');
        $('#contrasena-error').text('');
        $('#contrasenavalidacion-error').text('');
        $('#direccion-error').text('');

        var nombre = $('#nombre').val();
        var fechanac = $('#fechanac').val();
        var usuario = $('#usuario').val();
        var email = $('#email').val();
        var contrasena = $('#contrasena').val();
        var contrasenavalidacion = $('#contrasenavalidacion').val();
        var direccion = $('#direccion').val();

        if(nombre === '') {
            $('#nombre-error').text('Por favor ingresa tu nombre');
            return;
        }
        if(fechanac === '') {
            $('#fechanac-error').text('Por favor ingresa tu fecha de nacimiento');
            return;
        }
        if(usuario === '') {
            $('#usuario-error').text('Por favor ingresa tu nombre de usuario');
            return;
        }
        if(email === '') {
            $('#email-error').text('Por favor ingresa tu email');
            return;
        }
        if(contrasena === '') {
            $('#contrasena-error').text('Por favor ingresa una contraseña');
            return;
        }

        // Validacion de contraseña
        var passPattern = /^(?=.*\d)(?=.*[A-Z]).{6,18}$/;
        if(!passPattern.test(contrasena)) {
            $('#contrasena-error').text('La contraseña debe contener al menos un número y una letra en mayúscula, y tener entre 6 y 18 caracteres');
            return;
        }

        // Validar que las contraseñas coincidan
        if(contrasena !== contrasenavalidacion) {
            $('#contrasenavalidacion-error').text('Las contraseñas no coinciden');
            return;
        }

        // Validar que la persona sea mayor de  13 años
        var today = new Date();
        var birthDate = new Date(fechanac);
        var age = today.getFullYear() - birthDate.getFullYear();
        var monthDiff = today.getMonth() - birthDate.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        if (age < 13) {
            $('#fechanac-error').text('Debes tener al menos 13 años para registrarte');
            return;
        }
        this.submit();
    });
});
  </script>
  </body>
</html>
